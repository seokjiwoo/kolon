<div class="popTop">
	<h4 class="popTit">취소 신청</h4>
</div>
<div class="popCon js-cancelRequest-wrap">
	
</div>

<script id="cancel-request-templates" type="text/x-handlebars-template">
	{{#each product}}
	<h5 class="subTit">{{vxMath @index "+" 1}}. 상품 수령지 : {{receiverName}}<!-- - <span class="subAddr">{{receiverRoadBaseAddress}}</span>--></h5>
	<table class="record" summary="취소 신정정보 표로써 신청일, 취소 완료일, 취소신청 사유/책임 정보가 담겨있습니다.">
		<caption>취소 신청정보 표</caption>
		<tr>
			<th colspan="2">상품정보</th>
			<th>판매처</th>
			<th>배송비</th>
			<th>할인금액</th>
			<th>진행상태</th>
		</tr>
		<tr>
			<td class="popRecord"><div class="recordThumb"><img src="{{productImageUrl}}" alt=""></div></td>
			<td class="popRecord recordInfo">
			{{productName}}
			{{#if orderOptionName}}<span class="producOption">옵션 : {{orderOptionName}}</span>{{/if}}
			<span class="producOption">수량 : {{orderQuantity}}</span>
			<span class="productPrice">{{productOptionPrice}} 원</span>
			</td>

			<td>{{saleMemberName}}</td>
			<td>
			{{#vxSwitch deliveryChargeCode}}
				{{#vxCase "PD_DLVY_CHARGE_SETUP_01" break=true}}
					무료
				{{/vxCase}}
				{{#vxCase "PD_DLVY_CHARGE_SETUP_02" break=true}}
					{{deliveryFee}}원
				{{/vxCase}}
				{{#vxCase "PD_DLVY_CHARGE_SETUP_03" break=true}}
					{{deliveryFee}}원
				{{/vxCase}}
				{{#vxCase "PD_DLVY_CHARGE_SETUP_04" break=true}}
					{{deliveryFee}}원
				{{/vxCase}}
			{{/vxSwitch}}
			</td>
			<td>{{discountApplyAmt}}원</td>
			<td>{{orderStateCodeName}}</td>
		</tr>
	</table>
	<form>
		<fieldset class="reasonCancel">
			<h5>취소 신청 사유</h5>
			<select title="취소 신청 사유를 선택해주세요" class="cancelReasonDrop">
				<option value="">취소 신청 사유를 선택해주세요</option>
				{{#each ../claimReasons}}
				<option value="{{code}}">{{codeDescription}}</option>
				{{/each}}
			</select>
			<input type="text" title="상세 내용 입력" class="cancelReasonField">
		</fieldset>
	</form>
	{{/each}}
	
	<form action="#" method='post' class="js-cancel-form" id='js-order-cancel-form'>
		<fieldset class="reasonCancel">
			{{#if refundInfo}}
			<h5 class="subTit">환불정보</h5>
			<div class="table03Wrap">
				<table class="record" summary="환불정보 표로써 결제금액, 할인금액, 환불배송비 정보가 담겨있습니다.">
					<caption>환불정보 표</caption>
					<colgroup>
						<col style="width:47%">
						<col style="width:auto">
					</colgroup>
					<tr>
						<th class="h50">결제금액</th>
						<td class="h50">{{refundInfo.paymentAmount}} 원</td>
					</tr>
					<tr>
						<th>할인금액</th>
						<td>
							{{#each refundInfo.listDiscountItem}}
							&middot; {{discountType}} <span>{{discountAmt}}원</span>
							{{/each}}
						</td>
					</tr>
					<tr>
						<th class="h50">환불배송비</th>
						<td class="h50">{{refundInfo.refundDeliveryFee}}원</td>
					</tr>
				</table>
				<table class="record" summary="환불정보 표로써 차감금액, 추가배송비 정보가 담겨있습니다.">
					<caption>환불정보 표</caption>
					<colgroup>
						<col style="width:47%">
						<col style="width:auto">
					</colgroup>
					<tr>
						<th class="h50">차감금액</th>
						<td class="h50">{{refundInfo.subtractionAmt}}원</td>
					</tr>
					<tr>
						<th>추가배송비</th>
						<td>{{refundInfo.additionalDeliveryCharge}}원</td>
					</tr>
				</table>
				<table class="record" summary="환불정보 표로써 환불예상금액, 결제취소방법 정보가 담겨있습니다.">
					<caption>환불정보 표</caption>
					<colgroup>
						<col style="width:47%">
						<col style="width:auto">
					</colgroup>
					<tr>
						<th class="h50">환불예상금액</th>
						<td class="h50">{{refundInfo.paymentAmount}} 원</td>
					</tr>
					<tr>
						<td colspan="2" class="t_c">{{refundInfo.paymentMethodCodeName}}</b></td>
					</tr>
				</table>
			</div>
			{{/if}}
			{{#vxIF refundInfo.paymentMethodCode "==" "SL_PAYMENT_METHOD_03"}}
			<h5>환불계좌</h5>
			<div style='margin-bottom:40px'>
				{{#if refundAccount}}
					<table class="record" summary="환불계좌 표">
						<caption>환불계좌 표</caption>
						<colgroup>
							<col style="width:25%;"/>
							<col style="width:50%;"/>
							<col style="width:24%;"/>
						</colgroup>
						<tr>
							<th>입금은행</th>
							<th>계좌번호</th>
							<th>예금주</th>
						</tr>
						<tr>
							<td class="color04">{{refundAccount.bankName}}</td>
							<td class="color04">{{refundAccount.accountNumber}} <button class="btnSizeS btnColor03 btn profileEditButton" style="min-width: 0;margin-left: 15px;">계좌수정</a></td>
							<td class="color04">{{refundAccount.depositorName}}</td>
						</tr>
					</table>
				{{else}}
					등록된 환불계좌가 없습니다. <a class='profileEditButton'>마이커먼 > 정보수정</a>에서 환불계좌를 등록하신 후에 다시 시도해 주세요.
				{{/if}}
			</div>
			{{/vxIF}}
			<!-- 
			<ul class="tbList3">
				<li>취소 신청은 상품 배송 이전 단계에서만 가능합니다.</li>
				<li>배송중인 상품의 취소를 원하실 경우 고객센터(1666-8868)로 문의 부탁드립니다.</li>
				<li>묶음상품/해외배송상품 취소 시 배송정책에 따라 추가되는 배송비를 결제하셔야 주문취소가 완료됩니다.</li>
				<li>결제수단별 환불방법과 환불소요기한에 차이가 있을 수 있습니다.</li>
			</ul>
			-->
			{{#vxIF refundInfo.paymentMethodCode "==" "SL_PAYMENT_METHOD_03"}}
				{{#if refundAccount}}
				<div class="btnCenter">
					<button type="submit" class="btn btnSizeM btnColor01 js-cancel-submit">확인</button>
				</div>
				{{else}}
				{{/if}}
			{{else}}
				<div class="btnCenter">
					<button type="submit" class="btn btnSizeM btnColor01 js-cancel-submit">확인</button>
				</div>
			{{/vxIF}}
		</fieldset>
	</form>
</script>