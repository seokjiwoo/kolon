<!DOCTYPE html>
<html lang='ko-kr'>
<head>
	<!-- @@include ../_template/header.html {"title":"COMMON 마이커먼"} -->
</head>
<body data-page-id="myPage-scrapFolder" class="scrapFolder">
	<div class="wrapper my">
	<!-- @@include ../_template/menu.html -->
	<div class="container bgTop">
		<!-- @@include ../_template/my_depth01.html {"myMenu03":"on"} -->
		<!-- @@include ../_template/my_depth02_02.html {"myMenu04":"on"} -->
		<section class="wrap" id="scrapAll">
			<h2 class="hide">이미지 스크랩 폴더</h2>
			<p class="btnWrap t_r">
				<a href="../_popup/popScrapNew.html" class="btnSizeS btnColor04 newFolder btnPop btnPop540" data-user-class="scrapFolderNew popEdge">새폴더 만들기</a>
			</p>
			<!-- [D] 마크업 원본 --><!--
			<ul class="scrapPack">
				<li>
					<span class="packEdge"></span>
					<div class="packTit">
						<a href="../_popup/popScrapModi.html" class="btnPop btnPop540 editFolder" data-user-class="popEdge"></a>
						<h3>내 새로운 부엌을 위한 스크랩<span class="count">20</span></h3>
					</div>
					<a href="/myPage/scrapImage.html" class="packCon">
						<span><img src="../images/temp11.jpg" alt=""></span>
						<span><img src="../images/temp11.jpg" alt=""></span>
					</a>
				</li>
				<li>
					<span class="packEdge"></span>
					<div class="packTit">
						<a href="../_popup/popScrapModi.html" class="btnPop btnPop540 editFolder" data-user-class="popEdge"></a>
						<h3>내 새로운 부엌을 위한 스크랩<span class="count">20</span></h3>
					</div>
					<a href="/myPage/scrapImage.html" class="packCon">
						<span><img src="../images/temp11.jpg" alt=""></span>
						<span><img src="../images/temp11.jpg" alt=""></span>
					</a>
				</li>
				<li>
					<span class="packEdge"></span>
					<div class="packTit">
						<a href="../_popup/popScrapModi.html" class="btnPop btnPop540 editFolder" data-user-class="popEdge"></a>
						<h3>내 새로운 부엌을 위한 스크랩<span class="count">20</span></h3>
					</div>
					<a href="/myPage/scrapImage.html" class="packCon">
						<span><img src="../images/temp11.jpg" alt=""></span>
						<span><img src="../images/temp11.jpg" alt=""></span>
					</a>
				</li>
				<li>
					<span class="packEdge"></span>
					<div class="packTit">
						<a href="../_popup/popScrapModi.html" class="btnPop btnPop540 editFolder" data-user-class="popEdge"></a>
						<h3>내 새로운 부엌을 위한 스크랩<span class="count">20</span></h3>
					</div>
					<a href="/myPage/scrapImage.html" class="packCon">
						<span><img src="../images/temp11.jpg" alt=""></span>
						<span><img src="../images/temp11.jpg" alt=""></span>
					</a>
				</li>
				<li>
					<span class="packEdge"></span>
					<div class="packTit">
						<a href="../_popup/popScrapModi.html" class="btnPop btnPop540 editFolder" data-user-class="popEdge"></a>
						<h3>내 새로운 부엌을 위한 스크랩<span class="count">20</span></h3>
					</div>
					<a href="/myPage/scrapImage.html" class="packCon">
						<span><img src="../images/temp11.jpg" alt=""></span>
						<span><img src="../images/temp11.jpg" alt=""></span>
					</a>
				</li>
				<li>
					<span class="packEdge"></span>
					<div class="packTit">
						<a href="../_popup/popScrapModi.html" class="btnPop btnPop540 editFolder" data-user-class="popEdge"></a>
						<h3>내 새로운 부엌을 위한 스크랩<span class="count">20</span></h3>
					</div>
					<a href="/myPage/scrapImage.html" class="packCon">
						<span><img src="../images/temp11.jpg" alt=""></span>
						<span><img src="../images/temp11.jpg" alt=""></span>
					</a>
				</li>
				<li>
					<span class="packEdge"></span>
					<div class="packTit">
						<a href="../_popup/popScrapModi.html" class="btnPop btnPop540 editFolder" data-user-class="popEdge"></a>
						<h3>내 새로운 부엌을 위한 스크랩<span class="count">20</span></h3>
					</div>
					<a href="/myPage/scrapImage.html" class="packCon">
						<span><img src="../images/temp11.jpg" alt=""></span>
						<span><img src="../images/temp11.jpg" alt=""></span>
					</a>
				</li>
				<li>
					<span class="packEdge"></span>
					<div class="packTit">
						<a href="../_popup/popScrapModi.html" class="btnPop btnPop540 editFolder" data-user-class="popEdge"></a>
						<h3>내 새로운 부엌을 위한 스크랩<span class="count">20</span></h3>
					</div>
					<a href="/myPage/scrapImage.html" class="packCon">
						<span><img src="../images/temp11.jpg" alt=""></span>
						<span><img src="../images/temp11.jpg" alt=""></span>
					</a>
				</li>
				<li>
					<span class="packEdge"></span>
					<div class="packTit">
						<a href="../_popup/popScrapModi.html" class="btnPop btnPop540 editFolder" data-user-class="popEdge"></a>
						<h3>내 새로운 부엌을 위한 스크랩<span class="count">20</span></h3>
					</div>
					<a href="/myPage/scrapImage.html" class="packCon">
						<span><img src="../images/temp11.jpg" alt=""></span>
						<span><img src="../images/temp11.jpg" alt=""></span>
					</a>
				</li>
				<li>
					<span class="packEdge"></span>
					<div class="packTit">
						<a href="../_popup/popScrapModi.html" class="btnPop btnPop540 editFolder" data-user-class="popEdge"></a>
						<h3>내 새로운 부엌을 위한 스크랩<span class="count">20</span></h3>
					</div>
					<a href="/myPage/scrapImage.html" class="packCon">
						<span><img src="../images/temp11.jpg" alt=""></span>
						<span><img src="../images/temp11.jpg" alt=""></span>
					</a>
				</li>
				<li>
					<span class="packEdge"></span>
					<div class="packTit">
						<a href="../_popup/popScrapModi.html" class="btnPop btnPop540 editFolder" data-user-class="popEdge"></a>
						<h3>내 새로운 부엌을 위한 스크랩<span class="count">20</span></h3>
					</div>
					<a href="/myPage/scrapImage.html" class="packCon">
						<span><img src="../images/temp11.jpg" alt=""></span>
						<span><img src="../images/temp11.jpg" alt=""></span>
					</a>
				</li>
				<li>
					<span class="packEdge"></span>
					<div class="packTit">
						<a href="../_popup/popScrapModi.html" class="btnPop btnPop540 editFolder" data-user-class="popEdge"></a>
						<h3>내 새로운 부엌을 위한 스크랩<span class="count">20</span></h3>
					</div>
					<a href="/myPage/scrapImage.html" class="packCon">
						<span><img src="../images/temp11.jpg" alt=""></span>
						<span><img src="../images/temp11.jpg" alt=""></span>
					</a>
				</li>
				<li>
					<span class="packEdge"></span>
					<div class="packTit">
						<a href="../_popup/popScrapModi.html" class="btnPop btnPop540 editFolder" data-user-class="popEdge"></a>
						<h3>내 새로운 부엌을 위한 스크랩<span class="count">20</span></h3>
					</div>
					<a href="/myPage/scrapImage.html" class="packCon">
						<span><img src="../images/temp11.jpg" alt=""></span>
						<span><img src="../images/temp11.jpg" alt=""></span>
					</a>
				</li>
				<li>
					<span class="packEdge"></span>
					<div class="packTit">
						<a href="../_popup/popScrapModi.html" class="btnPop btnPop540 editFolder" data-user-class="popEdge"></a>
						<h3>내 새로운 부엌을 위한 스크랩<span class="count">20</span></h3>
					</div>
					<a href="/myPage/scrapImage.html" class="packCon">
						<span><img src="../images/temp11.jpg" alt=""></span>
						<span><img src="../images/temp11.jpg" alt=""></span>
					</a>
				</li>
				<li>
					<span class="packEdge"></span>
					<div class="packTit">
						<a href="../_popup/popScrapModi.html" class="btnPop btnPop540 editFolder" data-user-class="popEdge"></a>
						<h3>내 새로운 부엌을 위한 스크랩<span class="count">20</span></h3>
					</div>
					<a href="/myPage/scrapImage.html" class="packCon">
						<span><img src="../images/temp11.jpg" alt=""></span>
						<span><img src="../images/temp11.jpg" alt=""></span>
					</a>
				</li>
				<li>
					<span class="packEdge"></span>
					<div class="packTit">
						<a href="../_popup/popScrapModi.html" class="btnPop btnPop540 editFolder" data-user-class="popEdge"></a>
						<h3>내 새로운 부엌을 위한 스크랩<span class="count">20</span></h3>
					</div>
					<a href="/myPage/scrapImage.html" class="packCon">
						<span><img src="../images/temp11.jpg" alt=""></span>
						<span><img src="../images/temp11.jpg" alt=""></span>
					</a>
				</li>
			</ul>
			--><!--// [D] 마크업 원본 -->
			<ul class="scrapPack">
			</ul>
		</section>
		<!-- @@include ../_template/footer.html -->
		</div>
	</div>

<script id="scrapFolder-folder-templates" type="text/x-handlebars-template">
	{{#folders}}
	<li data-scrapfolder-info='{
		"folderName" : "{{folderName}}",
		"folderNumber" : {{folderNumber}}
	}'>
		<span class="packEdge"></span>
		<div class="packTit">
			<a href="../_popup/popScrapModi.html?folderName={{folderName}}&amp;folderNumber={{folderNumber}}" class="btnPop btnPop540 editFolder" data-user-class="scrapFolderEdit popEdge"></a>
			<h3>{{folderName}}<span class="count">{{scrapCount}}</span></h3>
		</div>
		<a href="/myPage/scrapImage.html?folderName={{folderName}}&amp;folderNumber={{folderNumber}}" class="packCon">
			{{#scrapImages}}
				{{#vxIF @index "<" 2}}
				<span><img src="{{imageUrl}}" alt="{{imageTitle}}">{{@index}}</span>
				{{/vxIF}}
			{{/scrapImages}}
		</a>
	</li>
	{{/folders}} 
</script>

<script>
	;(function(win, $) {
		'use strict';

		if ('undefined' === typeof win.vinylX) {
			win.vinylX = {};
		}

		var doc = document,
		NS = win.vinylX;

		var CB_EVENTS = {
			COMPLETE : 'cbox_complete',
			CLEANUP : 'cbox_cleanup',
			CLOSED : 'cbox_closed'
		};

		NS.demoScrapFolders = (function() {
			var defParams = {
				templates : {
					wrap : '.scrapPack',
					source : '#scrapFolder-folder-templates'
				},
				colorbox : '#colorbox',
				editFolder : {
					wrap : 'scrapFolderEdit',
					inp : '.js-scrapFolderEdit-inp',
					delete : '.js-scrapFolderEdit-delete',
					submit : '.js-scrapFolderEdit-submit'
				},
				newFolder : {
					wrap : 'scrapFolderNew',
					inp : '.js-scrapFolderNew-inp',
					submit : '.js-scrapFolderNew-submit'
				},
				cssClass : {
				},
				dataAttr : {
					popBtn : '[data-user-class]',
					scrapFolderInfo : '[data-scrapfolder-info]'
				},
				dummyData : {}
			};
			return {
				init : function(container, args) {
					if (!(this.container = container).size()) return;

					this.opts = $.extend({}, defParams, args);

					this.setElements();
					this.dummyData();
					this.setBindEvents();
				},
				dummyData : function() {
					var source = $(this.opts.templates.source).html(),
					template = win.Handlebars.compile(source),
					html = template(this.opts.dummyData);

					this.templatesWrap.append(html);
					$('body').trigger('btnPop_refresh');
				},
				setElements : function() {
					this.colorbox = this.container.find(this.opts.colorbox);
					this.templatesWrap = this.container.find(this.opts.templates.wrap);
					this.selPopBtnInfo = {};
				},
				setBindEvents : function() {
					this.templatesWrap.on('click', this.opts.dataAttr.popBtn, $.proxy(this.onWrapPopBtnClick, this));

					$(doc).on(CB_EVENTS.COMPLETE, $.proxy(this.onCboxEventListener, this))
							.on(CB_EVENTS.CLEANUP, $.proxy(this.onCboxEventListener, this))
							.on(CB_EVENTS.CLOSED, $.proxy(this.onCboxEventListener, this));
				},
				onWrapPopBtnClick : function(e) {
					var target = $(e.target),
					info = target.closest(this.opts.dataAttr.scrapFolderInfo).data('scrapfolder-info');

					this.selPopBtnInfo = {
						target : target,
						info : info
					};
				},
				onCboxEventListener : function(e) {
					switch(e.type) {
						case CB_EVENTS.COMPLETE:
							if (this.colorbox.hasClass(this.opts.editFolder.wrap)) {
								this.setScrapFolderEdit();
							}

							if (this.colorbox.hasClass(this.opts.newFolder.wrap)) {
								this.setScrapFolderNew();
							}
							break;
						case CB_EVENTS.CLEANUP:
							if (this.colorbox.hasClass(this.opts.editFolder.wrap)) {
								this.destroyScrapFolderEdit();
							}
							break;
						case CB_EVENTS.CLOSED:
							break;
					}
				},
				setScrapFolderEdit : function() {
					this.colorbox.find(this.opts.editFolder.inp).val(this.selPopBtnInfo.info.folderName);
					this.colorbox.find(this.opts.editFolder.delete).on('click', $.proxy(function(e) {
						e.preventDefault();

						var target = $(e.target);
						win.console.log('폴더 수정하기 - 폴더삭제', target);
					}, this));
					this.colorbox.find(this.opts.editFolder.submit).on('click', $.proxy(function(e) {
						e.preventDefault();

						var target = $(e.target),
						inp = this.colorbox.find(this.opts.editFolder.inp);

						if (!inp.val() || inp.val() === ' ') {
							win.alert('폴더명을 입력하세요.');
							inp.focus();
							return;
						}

						win.console.log('폴더 수정하기 - 저장', target, this.colorbox.find(this.opts.editFolder.inp).val());
					}, this));
				},
				destroyScrapFolderEdit : function() {
					if (this.colorbox.hasClass(this.opts.editFolder.wrap)) {
						this.colorbox.find(this.opts.editFolder.delete).off('click');
						this.colorbox.find(this.opts.editFolder.submit).off('click');
					}
				},
				setScrapFolderNew : function() {
					this.colorbox.find(this.opts.newFolder.submit).on('click', $.proxy(function(e) {
						e.preventDefault();

						var target = $(e.target),
						inp = this.colorbox.find(this.opts.newFolder.inp);

						if (!inp.val() || inp.val() === ' ') {
							win.alert('폴더명을 입력하세요.');
							inp.focus();
							return;
						}

						win.console.log('새폴더 만들기 - 저장', target, this.colorbox.find(this.opts.newFolder.inp).val());
					}, this));
				}
			};
		})();

		$(function() {
			NS.demoScrapFolders.init($('body'), {
				dummyData : {"folders":[{"folderName":"폴더1","folderNumber":0,"recentImageTitle":"string","recentImageUrl":"string","scrapCount":2,"scrapImages":[{"imageTitle":"string","imageUrl":"../images/temp11.jpg"},{"imageTitle":"string","imageUrl":"../images/temp11.jpg"},{"imageTitle":"string","imageUrl":"../images/temp11.jpg"}]},{"folderName":"폴더2","folderNumber":0,"recentImageTitle":"string","recentImageUrl":"string","scrapCount":5,"scrapImages":[{"imageTitle":"string","imageUrl":"../images/temp11.jpg"},{"imageTitle":"string","imageUrl":"../images/temp11.jpg"},{"imageTitle":"string","imageUrl":"../images/temp11.jpg"},{"imageTitle":"string","imageUrl":"../images/temp11.jpg"},{"imageTitle":"string","imageUrl":"../images/temp11.jpg"}]},{"folderName":"폴더3","folderNumber":0,"recentImageTitle":"string","recentImageUrl":"string","scrapCount":10,"scrapImages":[{"imageTitle":"string","imageUrl":"../images/temp11.jpg"},{"imageTitle":"string","imageUrl":"../images/temp11.jpg"},{"imageTitle":"string","imageUrl":"../images/temp11.jpg"},{"imageTitle":"string","imageUrl":"../images/temp11.jpg"},{"imageTitle":"string","imageUrl":"../images/temp11.jpg"},{"imageTitle":"string","imageUrl":"../images/temp11.jpg"},{"imageTitle":"string","imageUrl":"../images/temp11.jpg"},{"imageTitle":"string","imageUrl":"../images/temp11.jpg"},{"imageTitle":"string","imageUrl":"../images/temp11.jpg"}]},{"folderName":"폴더3","folderNumber":0,"recentImageTitle":"string","recentImageUrl":"string","scrapCount":1,"scrapImages":[{"imageTitle":"string","imageUrl":"../images/temp11.jpg"}]}],"scraps":[{"category":"string","imageUrl":"string","magazine":{"createDate":"string","subTitle":"string","title":"string"},"product":{"price":0,"productDesc":"string","productName":"string"},"scrapCount":0,"scrapNumber":0,"seller":{"companyName":"string","sellerImageUrl":"string","sellerName":"string"},"tags":["string"]}]}
			});
		});
	})(window, window.jQuery);
</script>

</body>
</html>
